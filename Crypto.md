# Cryptography

This document details the cryptography used in this project.

## Clientside Message Encryption

This project uses [SJCL](http://bitwiseshiftleft.github.io/sjcl/) for the encryption of it's messages. 
Specifically it uses the default convenience `encrypt` function, documented here: 
http://bitwiseshiftleft.github.io/sjcl/doc/sjcl.json.html

The cipher used is AES, with a block mode of CCM and key size of 128 bits.

The secret key used for the encryption is generated by use of `sjcl.random.randomWords(8)` (which is 256 bits?)

## Visitor Log Anonymization

While the server does not do any encryption of the message, it does provide the functionality to anonymize
visitor IPs that are otherwise displayed in the Visitor Log. 

It uses python's standard `hashlib` package and its sha256 function.

It uses a construction of `SHA256(salt || ip)` to mask IP addresses. A UUIDv4 is used for the salt, unique to each 
message submitted. This gives a keyspace of 154 bits (from the 122 bits of UUIDv4 plus the 32 bits from the IPv4).

The construction is vulnerable to a [length extension attack](https://blog.skullsecurity.org/2012/everything-you-need-to-know-about-hash-length-extension-attacks), assuming an adversary is able to manipulate the remote IP the service reads.





